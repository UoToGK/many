<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>css copy</title>
</head>
<style>
    #startrack {
        height: 140%;
        width: 100%
    }

    .background.fixed {
        position: fixed;
        top: -60%
    }

    .background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        overflow-x: hidden;
        /* overflow-y: hidden; */
    }

    .background .cover {
        position: absolute;
        bottom: -42%;
        left: 0;
        height: 100%;
        width: 100%;
        background: linear-gradient(to top, rgba(32, 32, 32, 1) 30%, rgba(32, 32, 32, 0) 100%)
    }
</style>

<body>
    <div class="background"><canvas id="startrack" width="933" height="1357"></canvas>
        <div class="cover"></div>
    </div>
</body>
<script>
    window.requestAnimFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (t) {
        window.setTimeout(t, 1e3 / 60)
    }
        ,
        window.onresize = function () {
            c.width = cw = c.offsetWidth,
                c.height = ch = c.offsetHeight,
                ctx.fillStyle = "rgba(21,21,21,1)",
                ctx.fillRect(0, 0, cw, ch)
        }
        ;
    var cf = document.createElement("canvas")
        , c = document.getElementById("startrack");
    c.width = cf.width = cw = c.offsetWidth,
        c.height = cf.height = ch = c.offsetHeight;
    var longside = Math.max(cw, ch);
    cf.width = 2.6 * longside,
        cf.height = 2.6 * longside;
    var ctx = c.getContext("2d")
        , cftx = cf.getContext("2d")
        , centerX = cw
        , centerY = 0
        , stars = []
        , drawTimes = 0;
    function rand(t, a) {
        var e = a - t
            , n = Math.random();
        return t + Math.round(n * e)
    }
    function createStar() {
        stars.push({
            x: rand(-cf.width, cf.width),
            y: rand(-cf.height, cf.height),
            size: 1,
            color: randomColor()
        })
    }
    function randomColor() {
        return "rgba(" + rand(120, 255) + "," + rand(120, 255) + "," + rand(120, 255) + "," + rand(30, 100) / 100 + ")"
    }
    function drawStar() {
        for (var t = stars.length; t--;) {
            var a = stars[t];
            cftx.beginPath(),
                cftx.arc(a.x, a.y, a.size, 0, 2 * Math.PI, !0),
                cftx.fillStyle = a.color,
                cftx.closePath(),
                cftx.fill()
        }
    }
    function drawfromCache() {
        ctx.drawImage(cf, -cf.width / 2, -cf.height / 2)
    }
    function loop() {
        drawfromCache(),
            ++drawTimes > 150 && drawTimes % 8 == 0 && (ctx.fillStyle = "rgba(0,0,0,.04)",
                ctx.fillRect(-3 * longside, -3 * longside, 6 * longside, 6 * longside)),
            rotateCanvas(.025)
    }
    function rotateCanvas(t) {
        ctx.rotate(t * Math.PI / 180)
    }
    ctx.fillStyle = "rgba(21,21,21,1)",
        ctx.fillRect(0, 0, cw, ch),
        ctx.lineCap = "round";
    for (var count = 2e4; count--;)
        createStar();
    drawStar();
    var x = centerX
        , y = centerY;
    function fireAnimate() {
        requestAnimFrame(fireAnimate),
            loop()
    }
    function changeStar() {
        loop = function () {
            drawfromCache(),
                ++drawTimes > 150 && drawTimes % 8 == 0 && (ctx.fillStyle = "rgba(0,0,0,.04)",
                    ctx.fillRect(-3 * longside, -3 * longside, 6 * longside, 6 * longside)),
                rotateCanvas(random(1, 100))
        }
    }
    function getMsg() {
        var t = ["希望能成为有趣的人", "给时光以生命<br>给岁月以文明", "你好，请多指教", "当你在凝视着网页的时候<br>网页也正在凝视着你", "苟……", "ご注文はねこですか？", "平凡的日常正奇迹的发生着", "Lata<br>lulila<br>lulula<br>lulalila ♪♫", "ただの人間には<br>興味ありません！", "さあ、ゲームを始めよう", "搞事！搞事！搞事！", "敬畏之心！", "赞美之心！", "我很好奇！", "欢迎大家光临星象馆<br>这里有着无论何时永远不会消失<br>美丽的无穷光辉<br>满天的星星等候着大家的到来"]
            , a = random(0, t.length - 1);
        $("#slogan").html(t[a])
    }
    function random(t, a) {
        var e = a - t
            , n = Math.random();
        return t + Math.round(n * e)
    }
    ctx.translate(x, y),
        fireAnimate()
        // $(function () {
        //     getMsg()
        // }),
        // window.onscroll = function () {
        //     $(window).scrollTop() > .6 * $(window).height() ? $(".background").addClass("fixed") : $(".background").removeClass("fixed")
        // }

</script>

</html>